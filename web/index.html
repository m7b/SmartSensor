<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Web interface for watering system">
    <meta name="author" content="Mark Buttig">

    <title>Watering System Dashboard</title>

    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <!-- Bootstrap JavaScript -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!-- Sparkline -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-sparklines/2.1.2/jquery.sparkline.min.js"></script>
    <!-- Ionicons -->
    <script src="https://unpkg.com/ionicons@4.5.5/dist/ionicons.js"></script>
    <!-- MQTT Websocket -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/paho-mqtt.js"></script>
    <!-- RWS css/script -->
    <link rel="stylesheet" href="rws.css">
    <script type="text/javascript" src="rws.js"></script>
  </head>

  <body>
    <div id="wrap">
      <div class="container-fluid">

        <h1><b>Watering System Dashboard</b> <ion-icon name="beaker" size="large"></ion-icon></h1>

        <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#ManualFct">Manual Functions <ion-icon name="people"></ion-icon></button>
        <button id="ToggleMoreInfos" type="button" class="btn btn-info">More infos <ion-icon name="code-working"></ion-icon></button>
        <div class="pt-3"></div>

        <div id="ManualFct" class="collapse">
            <div class="card card-body">
                <table class="table table-striped">
                    <!-- Manual function header -->
                    <tr>
                        <td width="25%" style="vertical-align:top;"><ion-icon name="people" size="large"></ion-icon></td>
                        <td style="vertical-align:middle;"></td>
                        <td align="center" style="vertical-align:middle;"><h4>Request</h4></td>
                        <td align="center" style="vertical-align:middle;"><h4>Acknowledge</h4></td>
                        <td colspan="2" align="center" style="vertical-align:middle;"><h4>Current Graph</h4></td>
                    </tr>
                    <!-- Pumpe -->
                    <tr>
                        <td style="vertical-align:middle;"><h5>Pumpe</h5></td>
                        <td style="vertical-align:middle;">
                            <div class="btn-group" role="group" aria-label="Pump functions">
                                <button id="ManFctPumpOn"  type="button" class="btn btn-sm btn-success active">An</button>
                                <button id="ManFctPumpOff" type="button" class="btn btn-sm btn-danger active">Aus</button>
                            </div>
                        </td>
                        <td align="center" style="vertical-align:middle;"><h5>&nbsp;<span id="ManualPumpReqLabel" class="label">Unknown</span></h5><small id="ManualPumpReqValue">(no value recieved)</small></td>
                        <td align="center" style="vertical-align:middle;"><h5>&nbsp;<span id="ManualPumpAckLabel" class="label">Unknown</span></h5><small id="ManualPumpAckValue">(no value recieved)</small></td>
                        <td align="right" style="vertical-align:middle;">3245 mA</td>
                        <td align="center" style="vertical-align:middle;">----------</td>
                    </tr>
                    <!-- Ventil -->
                    <tr>
                        <td style="vertical-align:middle;"><h5>Ventil</h5></td>
                        <td style="vertical-align:middle;">
                            <div class="btn-group" role="group" aria-label="Valve functions">
                                <button id="ManFctValveOn"  type="button" class="btn btn-sm btn-success active">An</button>
                                <button id="ManFctValveOff" type="button" class="btn btn-sm btn-danger active">Aus</button>
                            </div>
                        </td>
                        <td align="center" style="vertical-align:middle;"><h5>&nbsp;<span id="ManualValveReqLabel" class="label">Unknown</span></h5><small id="ManualValveReqValue">(no value recieved)</small></td>
                        <td align="center" style="vertical-align:middle;"><h5>&nbsp;<span id="ManualValveAckLabel" class="label">Unknown</span></h5><small id="ManualValveAckValue">(no value recieved)</small></td>
                        <td align="right" style="vertical-align:middle;">412 mA</td>
                        <td align="center" style="vertical-align:middle;">----------</td>
                    </tr>
                    <!-- Sensor Meassurement Mode-->
                    <tr>
                        <td style="vertical-align:middle;"><h5>Sensor Meassure Mode</h5></td>
                        <td colspan="5" style="vertical-align:middle;">
                            <button id="ManFctSensMeasMode0" type="button" class="btn btn-sm btn-primary"  >Permanent Meassure</button>
                            <button id="ManFctSensMeasMode1" type="button" class="btn btn-sm btn-secondary">Interval 5 sec</button>
                            <button id="ManFctSensMeasMode2" type="button" class="btn btn-sm btn-success"  >Interval 10 sec</button>
                            <button id="ManFctSensMeasMode3" type="button" class="btn btn-sm btn-danger"   >Interval 5 min</button>
                            <button id="ManFctSensMeasMode4" type="button" class="btn btn-sm btn-warning"  >Deep Sleep 20 sec</button>
                            <button id="ManFctSensMeasMode5" type="button" class="btn btn-sm btn-info"     >Deep Sleep 5 min</button>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="pt-3"></div>
        </div>

        <table class="table table-striped">
            <!-- Controller -->
            <tr>
                <td width="25%" style="vertical-align:top;"><ion-icon name="play" size="large"></ion-icon></td>
                <td align="center" style="vertical-align:middle;"><h4>Controller</h4></td>
            </tr>
            <!-- Ambient Brightness -->
            <tr>
                <td style="vertical-align:middle;"><h5>Ambient Brightness</h5></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="CtrlAmbBrightLabel" class="label">Unknown</span>&nbsp;<span class="CtrlAmbBrightSparkline"></span></h5><small id="CtrlAmbBrightValue">(no value recieved)</small></td>
            </tr>
        </table>
        <div class="pt-3"></div>

        <table class="table table-striped">
            <!-- Barrels -->
            <tr>
                <td width="25%" style="vertical-align:top;"><ion-icon name="analytics" size="large"></ion-icon></td>
                <td align="center" style="vertical-align:middle;"><h4>Barrel Source</h4><div class="progress"><div id="barSrc" class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width:75%">75%</div></div></td>
                <td align="center" style="vertical-align:middle;"><h4>Barrel Destination</h4><div class="progress"><div id="barDst" class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width:75%">75%</div></div></td>
            </tr>
            <!-- Status -->
            <tr>
                <td style="vertical-align:middle;"><h5>Status</h5></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="SrcStatusLabel" class="label">Unknown</span></h5><small id="SrcStatusValue">(no value recieved)</small></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="DstStatusLabel" class="label">Unknown</span></h5><small id="DstStatusValue">(no value recieved)</small></td>
            </tr>
            <!-- Level Zeitstempel -->
            <tr>
                <td style="vertical-align:middle;"><h5>Level Zeitstempel</h5></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="label0" class="label">Unknown</span></h5><small id="value0">(no value recieved)</small></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="DstLabel0" class="label">Unknown</span></h5><small id="DstValue0">(no value recieved)</small></td>
            </tr>
            <!-- Level cm (Rohwert)-->
            <tr>
                <td style="vertical-align:middle;"><h5>Level cm (Rohwert)</h5></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="label1" class="label">Unknown</span></h5><small id="value1">(no value recieved)</small></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="DstLabel1" class="label">Unknown</span></h5><small id="DstValue1">(no value recieved)</small></td>
            </tr>
            <!-- Level cm -->
            <tr>
                <td style="vertical-align:middle;"><h5>Level cm</h5></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="label2" class="label">Unknown</span></h5><small id="value2">(no value recieved)</small></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="DstLabel2" class="label">Unknown</span></h5><small id="DstValue2">(no value recieved)</small></td>
            </tr>
            <!-- Level % -->
            <tr>
                <td style="vertical-align:middle;"><h5>Level %</h5></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="label3" class="label">Unknown</span>&nbsp;<span class="srcLevelSparkline"></span></h5><small id="value3">(no value recieved)</small></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="DstLabel3" class="label">Unknown</span>&nbsp;<span class="dstLevelSparkline"></span></h5><small id="DstValue3">(no value recieved)</small></td>
            </tr>
            <!-- Function Mode Request -->
            <tr>
                <td style="vertical-align:middle;"><h5>Function Mode Request</h5></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="FunctionModeRequestLabel" class="label">Unknown</span></h5><small id="FunctionModeRequest">(no value recieved)</small></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="DstFunctionModeRequestLabel" class="label">Unknown</span></h5><small id="DstFunctionModeRequest">(no value recieved)</small></td>
            </tr>
            <!-- Function Mode Acknowledge -->
            <tr>
                <td style="vertical-align:middle;"><h5>Function Mode Acknowledge</h5></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="FunctionModeAcknowledgeLabel" class="label">Unknown</span></h5><small id="FunctionModeAcknowledge">(no value recieved)</small></td>
                <td style="vertical-align:middle;"><h5>&nbsp;<span id="DstFunctionModeAcknowledgeLabel" class="label">Unknown</span></h5><small id="DstFunctionModeAcknowledge">(no value recieved)</small></td>
            </tr>
        </table>
        <div class="pt-3"></div>
           
        <div class="row">
            <div class="col-md-6"><b>Latest MQTT message:  </b> <small id="message">no message recieved</small></div>
            <div class="col-md-6"><b>Status: </b>  <small id='status'></small></div>
        </div>
        <div class="pt-3"></div>

        <div class="footer">
          <small><p class="text-center">&copy; <a href="http://bierfass">Bierfass</a></p></small>
        </div>

      </div>
    </div>
  </body>
</html>